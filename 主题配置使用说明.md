# 主题配置和显示模式功能使用说明

## 功能概述

已为 `settings.html` 页面实现了完整的主题配置和显示模式功能,包括:

1. **5种主题色**:紫色(默认)、粉色、蓝色、绿色、橙色
2. **显示模式切换**:浅色模式和深色模式
3. **设置持久化**:所有设置自动保存到localStorage,刷新后保持

---

## 使用方法

### 1. 主题色切换

**操作步骤:**
1. 打开 `settings.html` 页面
2. 点击顶部导航的"系统配置"标签
3. 在"主题配置"卡片中,点击5个主题色选项之一
4. 主题色会立即应用到整个页面

**主题色列表:**
- **紫色渐变** (默认): #667eea → #764ba2
- **粉色渐变**: #f093fb → #f5576c
- **蓝色渐变**: #4facfe → #00f2fe
- **绿色渐变**: #43e97b → #38f9d7
- **橙色渐变**: #fa709a → #fee140

**应用范围:**
- 按钮渐变背景(如"保存所有设置"按钮)
- 激活状态的标签页底部指示条
- 链接和强调文字颜色
- 按钮边框和hover效果

---

### 2. 显示模式切换

**操作步骤:**
1. 在"主题配置"卡片中找到"显示模式"选项
2. 点击"浅色模式"或"深色模式"按钮
3. 页面会立即切换到相应模式
4. 当前激活的模式会显示"当前使用"标识

**浅色模式特点:**
- 白色背景 (#ffffff)
- 深色文字 (#111827)
- 浅灰色边框和阴影
- 适合日间使用,减少眼疲劳

**深色模式特点:**
- 深灰色背景 (#111827, #1f2937)
- 浅色文字 (#f9fafb)
- 深色边框和强化阴影
- 适合夜间使用,保护视力

---

## 技术实现

### CSS变量系统

使用CSS自定义属性(CSS Custom Properties)实现主题切换:

```css
/* 主题色变量 */
:root {
    --theme-gradient-start: #667eea;
    --theme-gradient-end: #764ba2;
    --theme-primary: #667eea;
    /* ... */
}

/* 不同主题 */
[data-theme="pink"] {
    --theme-gradient-start: #f093fb;
    --theme-gradient-end: #f5576c;
    /* ... */
}
```

### 显示模式实现

通过HTML根元素的`data-mode`属性控制:

```css
[data-mode="dark"] {
    --bg-primary: #111827;
    --text-primary: #f9fafb;
    /* ... */
}

[data-mode="dark"] .bg-white {
    background-color: var(--bg-primary) !important;
}
```

### JavaScript控制

```javascript
// 主题色切换
function selectThemeColor(color) {
    document.documentElement.setAttribute('data-theme', color);
    StorageManager.set('theme_color', color);
}

// 显示模式切换
function switchDisplayMode(mode) {
    document.documentElement.setAttribute('data-mode', mode);
    StorageManager.set('display_mode', mode);
}
```

---

## 数据持久化

所有设置都自动保存到浏览器的localStorage中:

| 设置项 | localStorage键 | 默认值 |
|--------|---------------|--------|
| 主题色 | `theme_color` | `purple` |
| 显示模式 | `display_mode` | `light` |
| 界面缩放 | `ui_scale` | `100` |

**特点:**
- 自动保存,无需手动操作
- 刷新页面后设置保持不变
- 不同浏览器独立存储
- 清除浏览器数据会重置为默认值

---

## 测试清单

### 主题色测试
- [x] 紫色主题正常应用
- [x] 粉色主题正常应用
- [x] 蓝色主题正常应用
- [x] 绿色主题正常应用
- [x] 橙色主题正常应用
- [x] 主题切换后按钮渐变更新
- [x] 主题切换后active状态正确显示

### 显示模式测试
- [x] 浅色模式正常显示
- [x] 深色模式正常显示
- [x] 模式切换后背景色正确
- [x] 模式切换后文字颜色正确
- [x] 模式切换后边框和阴影正确
- [x] 模式切换后输入框样式正确

### 持久化测试
- [x] 选择主题后刷新页面,主题保持
- [x] 切换模式后刷新页面,模式保持
- [x] 关闭浏览器后重新打开,设置保持

---

## 兼容性说明

**浏览器支持:**
- Chrome/Edge 88+
- Firefox 85+
- Safari 14+
- 不支持IE浏览器

**已知问题:**
- 某些第三方CSS类可能不会自动适配深色模式
- 部分固定颜色的Tailwind类需要手动适配

---

## 自定义扩展

### 添加新主题色

1. 在CSS中添加新的主题定义:
```css
[data-theme="自定义主题名"] {
    --theme-gradient-start: #开始颜色;
    --theme-gradient-end: #结束颜色;
    --theme-primary: #主色调;
    /* ... */
}
```

2. 在HTML中添加新的主题色选项:
```html
<div class="theme-color-option"
     style="background: linear-gradient(135deg, #开始颜色 0%, #结束颜色 100%);"
     onclick="selectThemeColor('自定义主题名')"
     title="主题名称"></div>
```

3. 更新JavaScript中的主题列表:
```javascript
const themeColors = ['purple', 'pink', 'blue', 'green', 'orange', '自定义主题名'];
```

### 微调深色模式

修改CSS变量值来调整深色模式的颜色:
```css
[data-mode="dark"] {
    --bg-primary: #你的背景色;
    --text-primary: #你的文字颜色;
    /* ... */
}
```

---

## 故障排除

### 问题: 主题色切换后没有效果

**解决方案:**
1. 检查浏览器控制台是否有JavaScript错误
2. 确认`StorageManager`和`UIUtils`已正确加载
3. 清除浏览器缓存后重试

### 问题: 深色模式下部分元素显示异常

**解决方案:**
1. 检查该元素是否使用了固定的Tailwind颜色类
2. 在CSS中添加深色模式特定样式
3. 使用CSS变量替代固定颜色

### 问题: 刷新后设置丢失

**解决方案:**
1. 检查localStorage是否被禁用
2. 确认没有在隐私/无痕模式下浏览
3. 检查浏览器是否允许网站存储数据

---

## 更新日志

**v1.0.0** (2025-12-02)
- 实现5种主题色切换功能
- 实现浅色/深色模式切换
- 添加设置持久化存储
- 优化主题切换动画效果

---

## 联系支持

如有问题或建议,请联系:
- 邮箱: support@beautycrm.com
- 电话: 400-888-8888
- 服务时间: 7×24小时
