# å·¥ä½œæ—¥å¿— - å®¢æˆ·èµ„æ–™æ¨¡æ¿åŠŸèƒ½å®ç°

**æ—¥æœŸ**: 2025-12-03
**ä»»åŠ¡**: å®ç°å®¢æˆ·èµ„æ–™æ¨¡æ¿ç®¡ç†åŠŸèƒ½

---

## ä¸€ã€é¡¹ç›®èƒŒæ™¯

### 1.1 åŸå§‹éœ€æ±‚
ç”¨æˆ·æå‡ºéœ€è¦ä¸ºå®¢æˆ·åŸºç¡€èµ„æ–™å»ºç«‹æ¨¡æ¿ç®¡ç†ç³»ç»Ÿï¼Œç±»ä¼¼äºå·²æœ‰çš„æ–¹æ¡ˆæ¨¡æ¿ç³»ç»Ÿï¼Œé€šè¿‡JSONæ–¹å¼è§£å†³çµæ´»æ€§é—®é¢˜ã€‚

### 1.2 æŠ€æœ¯å†³ç­–
- **é‡è¦å†³å®š**: åˆ›å»ºç‹¬ç«‹çš„ `customer_profile_templates` è¡¨ï¼Œè€Œä¸æ˜¯å¤ç”¨ `solution_templates` è¡¨
- **ç†ç”±**: ä¸¤ç§æ¨¡æ¿çš„ä¸šåŠ¡å«ä¹‰å’Œæ•°æ®ç»“æ„å®Œå…¨ä¸åŒ
  - æ–¹æ¡ˆæ¨¡æ¿ï¼šæŠ¤ç†æ–¹æ¡ˆé…ç½®ï¼ˆæŠ¤ç†æ­¥éª¤ã€æ‰€éœ€äº§å“ã€ç–—ç¨‹å‘¨æœŸç­‰ï¼‰
  - å®¢æˆ·èµ„æ–™æ¨¡æ¿ï¼šå®¢æˆ·ä¿¡æ¯é‡‡é›†å­—æ®µé…ç½®ï¼ˆå­—æ®µå®šä¹‰ã€å­—æ®µåˆ†ç»„ã€å…±äº«èŒƒå›´ç­‰ï¼‰

---

## äºŒã€å·²å®Œæˆçš„å·¥ä½œ

### 2.1 æ•°æ®åº“å±‚

#### åˆ›å»ºå®¢æˆ·èµ„æ–™æ¨¡æ¿è¡¨
**æ–‡ä»¶**: `database/create-customer-profile-templates-table.js`

```sql
CREATE TABLE customer_profile_templates (
  id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
  template_code VARCHAR(50) NOT NULL UNIQUE,
  template_name VARCHAR(100) NOT NULL,
  description TEXT,
  org_id BIGINT UNSIGNED,
  scope ENUM('global', 'org', 'private') NOT NULL DEFAULT 'org',
  apply_scene ENUM('all', 'new_customer', 'vip_customer', 'online_register', 'other') DEFAULT 'all',
  fields JSON NOT NULL COMMENT 'å­—æ®µå®šä¹‰ï¼ˆJSONæ•°ç»„ï¼‰',
  field_groups JSON DEFAULT NULL COMMENT 'å­—æ®µåˆ†ç»„é…ç½®',
  version VARCHAR(20) DEFAULT '1.0',
  is_default TINYINT(1) DEFAULT 0,
  usage_count INT DEFAULT 0,
  status ENUM('active', 'inactive', 'draft') DEFAULT 'active',
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  created_by BIGINT UNSIGNED,
  updated_by BIGINT UNSIGNED,
  is_deleted TINYINT(1) DEFAULT 0,
  INDEX idx_org_id (org_id),
  INDEX idx_scope (scope),
  INDEX idx_status (status)
);
```

**å…³é”®å­—æ®µè¯´æ˜**:
- `scope`: å…±äº«èŒƒå›´ - `global`(å…¨å±€) / `org`(ç»„ç»‡) / `private`(ç§æœ‰)
- `apply_scene`: é€‚ç”¨åœºæ™¯ - `all`(å…¨éƒ¨å®¢æˆ·) / `new_customer`(æ–°å®¢æˆ·) / `vip_customer`(VIPå®¢æˆ·) / `online_register`(çº¿ä¸Šæ³¨å†Œ) / `other`(å…¶ä»–)
- `fields`: JSONæ•°ç»„ï¼Œå­˜å‚¨å­—æ®µå®šä¹‰
- `field_groups`: JSONæ•°ç»„ï¼Œå­˜å‚¨å­—æ®µåˆ†ç»„é…ç½®

**é»˜è®¤æ•°æ®**: æ’å…¥äº†ä¸€ä¸ªå…¨å±€é»˜è®¤æ¨¡æ¿ï¼ŒåŒ…å«5ä¸ªåŸºç¡€å­—æ®µï¼ˆè‚¤è´¨ç±»å‹ã€çš®è‚¤é—®é¢˜ã€è¿‡æ•å²ã€åå¥½æ—¶æ®µã€èŒä¸šï¼‰

### 2.2 åç«¯APIå±‚

#### Modelå±‚
**æ–‡ä»¶**: `api/models/CustomerProfileTemplate.js`

å®ç°äº†9ä¸ªæ ¸å¿ƒæ–¹æ³•ï¼š
```javascript
static async getList(filters = {})      // è·å–æ¨¡æ¿åˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡µå’Œç­›é€‰ï¼‰
static async getById(id)                // è·å–å•ä¸ªæ¨¡æ¿è¯¦æƒ…
static async create(data)               // åˆ›å»ºæ–°æ¨¡æ¿
static async update(id, data)           // æ›´æ–°æ¨¡æ¿
static async delete(id)                 // è½¯åˆ é™¤æ¨¡æ¿
static async duplicate(id, data)        // å¤åˆ¶æ¨¡æ¿
static async incrementUsageCount(id)    // å¢åŠ ä½¿ç”¨æ¬¡æ•°
static async getStats(orgId)            // è·å–ç»Ÿè®¡ä¿¡æ¯
static async updateStatus(id, status)   // æ›´æ–°æ¨¡æ¿çŠ¶æ€
```

#### Routeå±‚
**æ–‡ä»¶**: `api/routes/customer-profile-templates.js`

å®ç°äº†8ä¸ªRESTfulç«¯ç‚¹ï¼š
```javascript
GET    /api/customer-profile-templates              // è·å–æ¨¡æ¿åˆ—è¡¨
GET    /api/customer-profile-templates/:id          // è·å–æ¨¡æ¿è¯¦æƒ…
POST   /api/customer-profile-templates              // åˆ›å»ºæ¨¡æ¿
PUT    /api/customer-profile-templates/:id          // æ›´æ–°æ¨¡æ¿
PATCH  /api/customer-profile-templates/:id/status   // æ›´æ–°çŠ¶æ€
DELETE /api/customer-profile-templates/:id          // åˆ é™¤æ¨¡æ¿
POST   /api/customer-profile-templates/:id/duplicate // å¤åˆ¶æ¨¡æ¿
POST   /api/customer-profile-templates/:id/increment-usage // å¢åŠ ä½¿ç”¨æ¬¡æ•°
GET    /api/customer-profile-templates/stats        // è·å–ç»Ÿè®¡ä¿¡æ¯
```

**é‡è¦ä¿®å¤**: ç»Ÿä¸€äº†æ‰€æœ‰ç«¯ç‚¹çš„å“åº”æ ¼å¼
```javascript
// æˆåŠŸå“åº”
{
  success: true,
  data: <å®é™…æ•°æ®>
}

// é”™è¯¯å“åº”
{
  success: false,
  error: {
    message: "é”™è¯¯æè¿°",
    details: error.message
  }
}
```

#### è·¯ç”±æ³¨å†Œ
**æ–‡ä»¶**: `api/app.js` (ç¬¬79-87è¡Œ)

```javascript
console.log('ğŸ”§ æ­£åœ¨åŠ è½½å®¢æˆ·èµ„æ–™æ¨¡æ¿è·¯ç”±...');
try {
    const customerProfileTemplatesRouter = require('./routes/customer-profile-templates');
    app.use('/api/customer-profile-templates', customerProfileTemplatesRouter);
    console.log('âœ… å®¢æˆ·èµ„æ–™æ¨¡æ¿è·¯ç”±åŠ è½½æˆåŠŸ');
} catch (error) {
    console.error('âŒ å®¢æˆ·èµ„æ–™æ¨¡æ¿è·¯ç”±åŠ è½½å¤±è´¥:', error);
}
```

### 2.3 å‰ç«¯å±‚

#### APIå°è£…
**æ–‡ä»¶**: `js/api.js` (ç¬¬523-600è¡Œ)

åˆ›å»ºäº† `customerProfileTemplateAPI` å¯¹è±¡ï¼ŒåŒ…å«æ‰€æœ‰CRUDæ–¹æ³•ï¼š
```javascript
const customerProfileTemplateAPI = {
    async getList(params),
    async getById(id),
    async create(data),
    async update(id, data),
    async updateStatus(id, status),
    async delete(id),
    async duplicate(id),
    async incrementUsage(id),
    async getStats(orgId)
};
```

#### ç®¡ç†é¡µé¢
**æ–‡ä»¶**: `customer-profile-templates.html`

- ä» `templates.html` å¤åˆ¶å¹¶ä¿®æ”¹
- æ›´æ–°äº†åˆ†ç±»ç­›é€‰æŒ‰é’®ï¼ˆglobal/org/privateï¼‰
- æ›´æ–°äº†JavaScriptæ˜ å°„ï¼ˆCATEGORIESã€APPLY_SCENESï¼‰
- ä¿®æ­£äº†æ‰€æœ‰APIè°ƒç”¨ï¼ˆä» solutionTemplateAPI æ”¹ä¸º customerProfileTemplateAPIï¼‰
- ä¿®æ­£äº†ç­›é€‰å­—æ®µï¼ˆä» category æ”¹ä¸º scopeï¼‰

#### ä¾§è¾¹æ èœå•æ›´æ–°
æ›´æ–°äº†12ä¸ªHTMLæ–‡ä»¶çš„ä¾§è¾¹æ ï¼Œæ·»åŠ "èµ„æ–™æ¨¡æ¿"èœå•é¡¹ï¼š
- index.html
- customers.html
- orders.html
- tasks.html
- cases.html
- templates.html
- franchisees.html
- users.html
- roles.html
- organizations.html
- settings.html
- customer-profile-templates.html

---

## ä¸‰ã€é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### é—®é¢˜1: é¡µé¢æ˜¾ç¤ºé”™è¯¯æ•°æ®
**ç°è±¡**: customer-profile-templates.html æ˜¾ç¤ºçš„æ˜¯æ–¹æ¡ˆæ¨¡æ¿æ•°æ®ï¼Œè€Œä¸æ˜¯å®¢æˆ·èµ„æ–™æ¨¡æ¿æ•°æ®

**åŸå› **: é¡µé¢ä» templates.html å¤åˆ¶åï¼Œä»ç„¶è°ƒç”¨ `solutionTemplateAPI`

**è§£å†³æ–¹æ¡ˆ**:
1. åœ¨ `js/api.js` ä¸­åˆ›å»º `customerProfileTemplateAPI`
2. æ›´æ–° HTML ä¸­5å¤„APIè°ƒç”¨
3. ä¿®æ”¹ç­›é€‰é€»è¾‘ï¼ˆcategory â†’ scopeï¼‰
4. æ›´æ–°æ¸²æŸ“å‡½æ•°ä»¥æ˜¾ç¤ºæ­£ç¡®çš„å­—æ®µ

### é—®é¢˜2: APIè¿”å›æ ¼å¼ä¸ä¸€è‡´
**ç°è±¡**: å‰ç«¯æŠ¥é”™ `åŠ è½½æ¨¡æ¿å¤±è´¥: undefined`

**åŸå› **: åç«¯è¿”å›åŸå§‹æ•°ç»„ `[{...}]`ï¼Œå‰ç«¯æœŸæœ› `{success: true, data: [...]}`

**è§£å†³æ–¹æ¡ˆ**: æ›´æ–°æ‰€æœ‰8ä¸ªAPIç«¯ç‚¹ï¼Œç»Ÿä¸€è¿”å›æ ¼å¼

### é—®é¢˜3: ä¿å­˜æ¨¡æ¿å¤±è´¥ï¼ˆ500é”™è¯¯ï¼‰
**ç°è±¡**: `Data truncated for column 'scope' at row 1`

**åŸå› **: å‰ç«¯å‘é€ `scope: 'organization'`ï¼Œä½†æ•°æ®åº“ENUMåªæ¥å— `'global'/'org'/'private'`

**è§£å†³æ–¹æ¡ˆ**:
1. ä¿®æ­£å‰ç«¯ä¿å­˜æ•°æ®æ—¶çš„ scope å€¼ï¼ˆ'organization' â†’ 'org'ï¼‰
2. ç§»é™¤ä¸é€‚ç”¨çš„å­—æ®µï¼ˆcategoryã€target_skin_typeã€course_durationç­‰ï¼‰
3. æ·»åŠ å¿…éœ€çš„å­—æ®µï¼ˆfieldsã€field_groupsã€descriptionã€apply_sceneï¼‰

---

## å››ã€å½“å‰çŠ¶æ€

### âœ… å·²æ­£å¸¸å·¥ä½œ
- æ•°æ®åº“è¡¨å·²åˆ›å»ºå¹¶æœ‰é»˜è®¤æ•°æ®
- åç«¯APIå…¨éƒ¨ç«¯ç‚¹å¯æ­£å¸¸è®¿é—®
- å‰ç«¯å¯ä»¥æ­£å¸¸åŠ è½½å’Œæ˜¾ç¤ºå®¢æˆ·èµ„æ–™æ¨¡æ¿åˆ—è¡¨
- æœåŠ¡å™¨è¿è¡Œæ­£å¸¸ï¼ˆhttp://localhost:3000ï¼‰

### âš ï¸ å·²çŸ¥é—®é¢˜
**UIä¸åŒ¹é…é—®é¢˜**: customer-profile-templates.html çš„è¡¨å•UIè¿˜ä¿ç•™äº†æ–¹æ¡ˆæ¨¡æ¿çš„ç»“æ„

**ä¸é€‚ç”¨çš„å­—æ®µ**:
- æ‰€å±åˆ†ç±»ï¼ˆè¿™æ˜¯æ–¹æ¡ˆæ¨¡æ¿çš„æ¦‚å¿µï¼‰
- ç›®æ ‡è‚¤è´¨ã€ç›®æ ‡å¹´é¾„æ®µ
- ç–—ç¨‹å‘¨æœŸã€æŠ¤ç†é¢‘ç‡
- æŠ¤ç†æ­¥éª¤ã€æ‰€éœ€äº§å“
- æ³¨æ„äº‹é¡¹

**ç¼ºå¤±çš„åŠŸèƒ½**:
- å­—æ®µå®šä¹‰é…ç½®UIï¼ˆè¿™æ˜¯å®¢æˆ·èµ„æ–™æ¨¡æ¿çš„æ ¸å¿ƒåŠŸèƒ½ï¼‰
- å­—æ®µåˆ†ç»„é…ç½®
- å­—æ®µç±»å‹é€‰æ‹©ï¼ˆtext/select/checkbox/radio/dateç­‰ï¼‰
- å­—æ®µéªŒè¯è§„åˆ™é…ç½®
- å­—æ®µæ˜¾ç¤ºé¡ºåºè°ƒæ•´

---

## äº”ã€å¾…åŠäº‹é¡¹

### 5.1 ç´§æ€¥ - ä¿®å¤ä¿å­˜åŠŸèƒ½
- [x] ä¿®æ­£ scope å­—æ®µå€¼é”™è¯¯
- [x] ç§»é™¤ä¸é€‚ç”¨çš„å­—æ®µ
- [x] æ·»åŠ å¿…éœ€çš„å­—æ®µ
- [ ] **æµ‹è¯•ä¿å­˜åŠŸèƒ½æ˜¯å¦æ­£å¸¸**

### 5.2 é‡è¦ - UIé‡æ„ï¼ˆæ¨èä¸‹ä¸€æ­¥å·¥ä½œï¼‰
é‡æ–°è®¾è®¡ customer-profile-templates.html çš„è¡¨å•éƒ¨åˆ†ï¼Œä½¿å…¶ç¬¦åˆå®¢æˆ·èµ„æ–™æ¨¡æ¿çš„å®é™…éœ€æ±‚ï¼š

**éœ€è¦çš„è¡¨å•å­—æ®µ**:
1. åŸºæœ¬ä¿¡æ¯
   - æ¨¡æ¿åç§° (template_name) âœ“
   - æ¨¡æ¿æè¿° (description)
   - å…±äº«èŒƒå›´ (scope): global/org/private
   - é€‚ç”¨åœºæ™¯ (apply_scene): all/new_customer/vip_customerç­‰
   - ç‰ˆæœ¬å· (version)

2. å­—æ®µé…ç½®ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰
   - å­—æ®µåˆ—è¡¨ç®¡ç†
   - æ¯ä¸ªå­—æ®µçš„é…ç½®é¡¹ï¼š
     - å­—æ®µé”®å (field_key)
     - å­—æ®µåç§° (field_name)
     - å­—æ®µç±»å‹ (field_type): text/select/checkbox/radio/date/numberç­‰
     - æ˜¯å¦å¿…å¡« (required)
     - é»˜è®¤å€¼ (default_value)
     - å ä½ç¬¦æ–‡æœ¬ (placeholder)
     - é€‰é¡¹åˆ—è¡¨ï¼ˆç”¨äºselect/checkbox/radioï¼‰
     - éªŒè¯è§„åˆ™ (validation)
     - æ˜¾ç¤ºé¡ºåº (display_order)
     - æ‰€å±åˆ†ç»„ (group)

3. å­—æ®µåˆ†ç»„é…ç½®
   - åˆ†ç»„åˆ—è¡¨ç®¡ç†
   - åˆ†ç»„åç§°ã€å›¾æ ‡ã€æ˜¾ç¤ºé¡ºåº

**å‚è€ƒç°æœ‰çš„é»˜è®¤æ¨¡æ¿æ•°æ®ç»“æ„**:
```json
{
  "fields": [
    {
      "field_key": "skin_type",
      "field_name": "è‚¤è´¨ç±»å‹",
      "field_type": "select",
      "required": true,
      "options": ["å¹²æ€§", "æ²¹æ€§", "æ··åˆæ€§", "æ•æ„Ÿæ€§", "ä¸­æ€§"],
      "default_value": "",
      "placeholder": "è¯·é€‰æ‹©è‚¤è´¨ç±»å‹",
      "display_order": 1,
      "group": "çš®è‚¤ä¿¡æ¯"
    }
  ]
}
```

### 5.3 ä¼˜åŒ–ä»»åŠ¡
- [ ] æ·»åŠ å­—æ®µæ¨¡æ¿é¢„è®¾ï¼ˆå¸¸ç”¨å­—æ®µåº“ï¼‰
- [ ] å®ç°å­—æ®µæ‹–æ‹½æ’åº
- [ ] æ·»åŠ å­—æ®µé¢„è§ˆåŠŸèƒ½
- [ ] å®ç°æ¨¡æ¿å¯¼å…¥å¯¼å‡º
- [ ] æ·»åŠ æ¨¡æ¿ç‰ˆæœ¬ç®¡ç†

---

## å…­ã€é‡è¦æŠ€æœ¯è¯´æ˜

### 6.1 æ•°æ®ç»“æ„è®¾è®¡
**æ–¹æ¡ˆæ¨¡æ¿ vs å®¢æˆ·èµ„æ–™æ¨¡æ¿å¯¹æ¯”**:

| ç‰¹æ€§ | æ–¹æ¡ˆæ¨¡æ¿ | å®¢æˆ·èµ„æ–™æ¨¡æ¿ |
|-----|---------|------------|
| è¡¨å | solution_templates | customer_profile_templates |
| æ ¸å¿ƒæ•°æ® | steps(æŠ¤ç†æ­¥éª¤), products(äº§å“), services(æœåŠ¡) | fields(å­—æ®µå®šä¹‰), field_groups(å­—æ®µåˆ†ç»„) |
| åˆ†ç±»æ–¹å¼ | category (hydration/whitening/anti_agingç­‰) | scope (global/org/private) |
| é€‚ç”¨å¯¹è±¡ | æŠ¤ç†æ–¹æ¡ˆè®¾è®¡ | å®¢æˆ·ä¿¡æ¯é‡‡é›† |
| å…³é”®å­—æ®µ | course_duration, treatment_frequency | apply_scene, validation |

### 6.2 æšä¸¾å€¼å®šä¹‰
```javascript
// scope å­—æ®µ
'global'  - å…¨å±€æ¨¡æ¿ï¼ˆæ‰€æœ‰æœºæ„å¯ç”¨ï¼‰
'org'     - ç»„ç»‡æ¨¡æ¿ï¼ˆæœ¬æœºæ„å¯ç”¨ï¼‰
'private' - ç§æœ‰æ¨¡æ¿ï¼ˆåˆ›å»ºè€…å¯ç”¨ï¼‰

// apply_scene å­—æ®µ
'all'              - å…¨éƒ¨å®¢æˆ·
'new_customer'     - æ–°å®¢æˆ·
'vip_customer'     - VIPå®¢æˆ·
'online_register'  - çº¿ä¸Šæ³¨å†Œ
'other'            - å…¶ä»–

// status å­—æ®µ
'active'   - å¯ç”¨
'inactive' - ç¦ç”¨
'draft'    - è‰ç¨¿
```

### 6.3 APIå“åº”æ ¼å¼æ ‡å‡†
æ‰€æœ‰APIç«¯ç‚¹å¿…é¡»éµå¾ªç»Ÿä¸€æ ¼å¼ï¼š

```javascript
// æˆåŠŸ
{
  success: true,
  data: <å®é™…æ•°æ®>
}

// å¤±è´¥
{
  success: false,
  error: {
    message: "é”™è¯¯æè¿°",
    details: "è¯¦ç»†é”™è¯¯ä¿¡æ¯ï¼ˆå¯é€‰ï¼‰"
  }
}
```

### 6.4 å­—æ®µå®šä¹‰JSONç»“æ„
```json
{
  "field_key": "å”¯ä¸€æ ‡è¯†",
  "field_name": "æ˜¾ç¤ºåç§°",
  "field_type": "å­—æ®µç±»å‹(text/select/checkbox/radio/date/number/textarea)",
  "required": true/false,
  "options": ["é€‰é¡¹1", "é€‰é¡¹2"],  // ç”¨äºselect/checkbox/radio
  "default_value": "é»˜è®¤å€¼",
  "placeholder": "å ä½ç¬¦æ–‡æœ¬",
  "validation": {
    "min": 0,
    "max": 100,
    "pattern": "æ­£åˆ™è¡¨è¾¾å¼"
  },
  "display_order": 1,
  "group": "åˆ†ç»„åç§°"
}
```

---

## ä¸ƒã€å…³é”®æ–‡ä»¶æ¸…å•

### æ•°æ®åº“æ–‡ä»¶
- `database/create-customer-profile-templates-table.js` - è¡¨åˆ›å»ºè„šæœ¬

### åç«¯æ–‡ä»¶
- `api/models/CustomerProfileTemplate.js` - æ•°æ®æ¨¡å‹
- `api/routes/customer-profile-templates.js` - è·¯ç”±æ§åˆ¶å™¨
- `api/app.js` - è·¯ç”±æ³¨å†Œï¼ˆç¬¬79-87è¡Œï¼‰

### å‰ç«¯æ–‡ä»¶
- `js/api.js` - APIå°è£…ï¼ˆç¬¬523-600è¡Œï¼‰
- `customer-profile-templates.html` - ç®¡ç†é¡µé¢
- å…¶ä»–12ä¸ªHTMLæ–‡ä»¶ - ä¾§è¾¹æ èœå•æ›´æ–°

---

## å…«ã€è°ƒè¯•å’Œæµ‹è¯•

### å¯åŠ¨æœåŠ¡å™¨
```bash
cd "D:\work6\ç¾ä¸šå®¢æˆ·åå°\api"
npm start
```

### æµ‹è¯•APIç«¯ç‚¹
```bash
# è·å–æ¨¡æ¿åˆ—è¡¨
curl http://localhost:3000/api/customer-profile-templates?org_id=1

# è·å–å•ä¸ªæ¨¡æ¿
curl http://localhost:3000/api/customer-profile-templates/1

# åˆ›å»ºæ¨¡æ¿ï¼ˆéœ€è¦POSTè¯·æ±‚ï¼‰
# æ›´æ–°æ¨¡æ¿ï¼ˆéœ€è¦PUTè¯·æ±‚ï¼‰
# åˆ é™¤æ¨¡æ¿ï¼ˆéœ€è¦DELETEè¯·æ±‚ï¼‰
```

### è®¿é—®ç®¡ç†é¡µé¢
http://localhost:3000/customer-profile-templates.html

---

## ä¹ã€ä¸‹ä¸€æ­¥å»ºè®®

### æ–¹æ¡ˆA: å¿«é€ŸéªŒè¯ï¼ˆæ¨èä¼˜å…ˆï¼‰
1. åˆ·æ–°æµè§ˆå™¨é¡µé¢
2. æµ‹è¯•ç¼–è¾‘å¹¶ä¿å­˜ç°æœ‰æ¨¡æ¿
3. ç¡®è®¤ä¿å­˜åŠŸèƒ½å·²ä¿®å¤
4. å¦‚æœæˆåŠŸï¼Œå†è¿›è¡ŒUIé‡æ„

### æ–¹æ¡ˆB: å®Œæ•´é‡æ„ï¼ˆé•¿æœŸæ–¹æ¡ˆï¼‰
1. å¤‡ä»½å½“å‰ customer-profile-templates.html
2. é‡æ–°è®¾è®¡è¡¨å•UIï¼Œä¸“é—¨é’ˆå¯¹å®¢æˆ·èµ„æ–™æ¨¡æ¿çš„éœ€æ±‚
3. å®ç°å­—æ®µé…ç½®åŠŸèƒ½ï¼ˆæœ€æ ¸å¿ƒï¼‰
4. å®ç°å­—æ®µåˆ†ç»„åŠŸèƒ½
5. æ·»åŠ å­—æ®µé¢„è§ˆåŠŸèƒ½
6. æµ‹è¯•å®Œæ•´çš„CRUDæµç¨‹

---

## åã€æ³¨æ„äº‹é¡¹

1. **ä¸è¦æ··æ·†ä¸¤ç§æ¨¡æ¿**: æ–¹æ¡ˆæ¨¡æ¿å’Œå®¢æˆ·èµ„æ–™æ¨¡æ¿æ˜¯å®Œå…¨ä¸åŒçš„ä¸šåŠ¡å¯¹è±¡
2. **scopeå€¼å›ºå®š**: å¿…é¡»ä½¿ç”¨ 'global'/'org'/'private'ï¼Œä¸èƒ½ç”¨å…¶ä»–å€¼
3. **fieldså¿…é¡»æ˜¯JSON**: å³ä½¿ä¸ºç©ºä¹Ÿè¦ä¼  `JSON.stringify([])`
4. **APIå“åº”æ ¼å¼ç»Ÿä¸€**: æ‰€æœ‰ç«¯ç‚¹éƒ½å¿…é¡»è¿”å› `{success, data/error}` æ ¼å¼
5. **è½¯åˆ é™¤**: ä½¿ç”¨ is_deleted æ ‡è®°ï¼Œä¸è¦ç‰©ç†åˆ é™¤æ•°æ®

---

## åä¸€ã€ç›¸å…³æ–‡æ¡£

- [æ•°æ®åº“è¡¨ç»“æ„è¯´æ˜](./æ•°æ®åº“è¡¨ç»“æ„è¯´æ˜.md)
- [APIæ¥å£æ–‡æ¡£](../APIæ¥å£æ–‡æ¡£-å®¢æˆ·æ¡ˆä¾‹.md)
- [å·¥ä½œæ—¥å¿—-2025-12-01-ç”¨æˆ·ç®¡ç†æ¨¡å—](./å·¥ä½œæ—¥å¿—-2025-12-01-ç”¨æˆ·ç®¡ç†æ¨¡å—.md)
- [å·¥ä½œæ—¥å¿—-2025-12-02-ç»„ç»‡åˆ‡æ¢ä¸ä¸»é¢˜é…ç½®](./å·¥ä½œæ—¥å¿—-2025-12-02-ç»„ç»‡åˆ‡æ¢ä¸ä¸»é¢˜é…ç½®.md)

---

**æœ€åæ›´æ–°**: 2025-12-03 17:06
**å½“å‰çŠ¶æ€**: ä¿å­˜åŠŸèƒ½å·²ä¿®å¤ï¼Œç­‰å¾…æµ‹è¯•éªŒè¯
**ä¸‹ä¸€æ­¥**: æµ‹è¯•ä¿å­˜åŠŸèƒ½ â†’ UIé‡æ„ï¼ˆæ ¹æ®éœ€è¦ï¼‰
